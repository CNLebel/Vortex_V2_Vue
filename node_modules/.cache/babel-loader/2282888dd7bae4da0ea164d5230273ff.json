{"remainingRequest":"H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\babel-loader\\lib\\index.js!H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\Projects\\WebStorm\\vortex_v2\\src\\components\\users\\UserRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\Projects\\WebStorm\\vortex_v2\\src\\components\\users\\UserRegister.vue","mtime":1563801765941},{"path":"H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\Projects\\WebStorm\\vortex_v2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nimport { setInterval } from 'timers';\nexport default {\n  data: function data() {\n    return {\n      phonecode: '',\n      code_id: '',\n      pcode_id: '',\n      img_url: '',\n      image_code_text: '',\n      count: '',\n      timer: null,\n      show_sms: true,\n      smscode: '',\n      password: '',\n      password2: ''\n    };\n  },\n  created: function created() {\n    this.getImageCode();\n  },\n  methods: {\n    uuid: function uuid() {\n      var s = [];\n      var hexDigits = \"0123456789abcdef\";\n\n      for (var i = 0; i < 36; i++) {\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n      }\n\n      s[14] = \"4\";\n      s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);\n      s[8] = s[13] = s[18] = s[23] = \"-\";\n      var uuid = s.join(\"\");\n      return uuid;\n    },\n    smsDisabling: function smsDisabling() {\n      var _this = this;\n\n      var TIME_COUNT = 60;\n\n      if (!this.timer) {\n        this.count = TIME_COUNT;\n        this.show_sms = false;\n        this.timer = setInterval(function () {\n          if (_this.count > 0 && _this.count <= TIME_COUNT) {\n            _this.count--;\n          } else {\n            _this.show_sms = true;\n            clearInterval(_this.timer);\n            _this.timer = null;\n          }\n        }, 1000);\n      }\n    },\n    getImageCode: function getImageCode() {\n      this.code_id = this.uuid();\n      this.img_url = 'http://192.168.46.124:8000/api/imagecode?code_id=' + this.code_id + '&pcode_id=' + this.pcode_id;\n    },\n    getAgain: function getAgain() {\n      this.pcode_id = this.code_id;\n      this.code_id = this.uuid();\n      this.img_url = 'http://192.168.46.124:8000/api/imagecode?code_id=' + this.code_id + '&pcode_id=' + this.pcode_id;\n    },\n    getPhoneCode: function getPhoneCode() {\n      var _this2 = this;\n\n      this.$http.post('api/smscode', {\n        data: JSON.stringify({\n          mobile: this.phonecode,\n          image_code_id: this.code_id,\n          image_code_text: this.image_code_text\n        })\n      }).then(function (result) {\n        if (result.body.errcode === '0') {\n          _this2.smsDisabling();\n\n          Toast('获取短信成功请留意查收!');\n        } else {\n          Toast('获取短信验证码失败!');\n        }\n      });\n    },\n    userRegister: function userRegister() {\n      this.$http.post('api/register', {\n        data: JSON.stringify({\n          mobile: this.phonecode,\n          smscode: this.smscode,\n          password: this.password,\n          password2: this.password2\n        })\n      }).then(function (result) {\n        if (result.body.errno === '0') {\n          Toast('手机号注册成功!');\n        } else if (result.body.errno === '3') {\n          Toast('手机号已注册!');\n        } else {\n          Toast('手机号注册失败!');\n        }\n\n        console.log(result.body);\n      });\n    }\n  }\n};",{"version":3,"sources":["UserRegister.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <div class=\"vortex_img\">\r\n            <img src=\"../../assets/users/register_vortex.png\" alt=\"\">\r\n        </div>\r\n\r\n        <div class=\"form_box\">\r\n            <form action=\"\">\r\n\r\n                <div class=\"mui-input-row row_block\">\r\n                    <div class=\"r_b_icon\">\r\n                        <img src=\"../../assets/users/register_moblie.png\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"r_b_input\">\r\n                        <input type=\"text\" placeholder=\"手机号码\" v-model=\"phonecode\">\r\n                    </div>    \r\n                </div>\r\n\r\n                <div class=\"mui-input-row row_block\">\r\n                    <div class=\"r_b_icon\">\r\n                        <img src=\"../../assets/users/register_img.png\" alt=\"\">\r\n                    </div>\r\n\r\n                    <div class=\"r_b_img\">\r\n                        <div class=\"img_input\">\r\n                            <input type=\"text\" placeholder=\"图形验证\" v-model=\"image_code_text\">\r\n                        </div>\r\n                        <div class=\"img_img\">\r\n                            <img v-bind:src=\"img_url\" alt=\"\"  @click=\"getAgain\">\r\n                        </div>\r\n                    </div>\r\n                   \r\n                </div>\r\n\r\n                <div class=\"mui-input-row row_block\">\r\n                    <div class=\"r_b_icon\">\r\n                        <img src=\"../../assets/users/register_message.png\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"r_b_moblie\">\r\n                        <div class=\"mobile_input\">\r\n                            <input type=\"text\" placeholder=\"短信验证\" v-model=\"smscode\">\r\n                        </div>\r\n                        <div class=\"mobile_button\">\r\n                            <button v-show=\"show_sms\" @click=\"getPhoneCode\">获取验证码</button>\r\n                            <button v-show=\"!show_sms\" @click=\"getPhoneCode\">{{ count }}s</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div class=\"mui-input-row row_block\">\r\n                    <div class=\"r_b_icon\">\r\n                        <img src=\"../../assets/users/register_password.png\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"r_b_input\">\r\n                        <input type=\"password\" placeholder=\"密       码\" v-model=\"password\">\r\n                    </div>    \r\n                </div>\r\n\r\n                <div class=\"mui-input-row row_block\">\r\n                    <div class=\"r_b_icon\">\r\n                        <img src=\"../../assets/users/register_password.png\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"r_b_input\">\r\n                        <input type=\"password\" placeholder=\"确认密码\" v-model=\"password2\">\r\n                    </div>    \r\n                </div>\r\n\r\n                <mt-button type=\"primary\" size=\"large\" @click=\"userRegister\">立即注册</mt-button>\r\n                <div class=\"r_b_target\">\r\n                    <p>已有帐号，<router-link to=\"/login\">立即登录</router-link></p>   \r\n                </div>\r\n            </form>\r\n\r\n        </div>\r\n        \r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"mint-ui\";\r\nimport { setInterval } from 'timers';\r\n\r\nexport default {\r\n    \r\n    data(){\r\n        return {\r\n            phonecode: '',\r\n            code_id: '',\r\n            pcode_id: '',\r\n            img_url: '',\r\n            image_code_text: '',\r\n            count: '',\r\n            timer: null,\r\n            show_sms: true,\r\n            smscode: '',\r\n            password: '',\r\n            password2: '',\r\n        }\r\n    },\r\n    created() {\r\n        this.getImageCode();\r\n    },\r\n    methods:{\r\n        uuid() {\r\n            var s = [];\r\n            var hexDigits = \"0123456789abcdef\";\r\n            for(var i=0; i<36; i++){\r\n                s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n            }\r\n            s[14] = \"4\";\r\n            s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n            s[8] = s[13] = s[18] = s[23] = \"-\";\r\n            var uuid = s.join(\"\");\r\n            return uuid;\r\n        },\r\n        smsDisabling(){\r\n            const TIME_COUNT = 60;\r\n            if(!this.timer){\r\n                this.count = TIME_COUNT;\r\n                this.show_sms = false;\r\n                this.timer = setInterval(() => {\r\n                    if(this.count > 0 && this.count <= TIME_COUNT){\r\n                        this.count--;\r\n                    }else{\r\n                        this.show_sms = true;\r\n                        clearInterval(this.timer);\r\n                        this.timer = null;\r\n                    }\r\n                }, 1000)\r\n            }\r\n        },\r\n        getImageCode() {\r\n            this.code_id = this.uuid();\r\n            this.img_url = 'http://192.168.46.124:8000/api/imagecode?code_id='+ this.code_id + '&pcode_id=' + this.pcode_id;\r\n        },\r\n        getAgain(){\r\n            this.pcode_id = this.code_id;\r\n            this.code_id = this.uuid();\r\n            this.img_url = 'http://192.168.46.124:8000/api/imagecode?code_id='+ this.code_id + '&pcode_id=' + this.pcode_id;\r\n        }, \r\n        getPhoneCode(){\r\n            this.$http.post('api/smscode',{data:JSON.stringify({mobile:this.phonecode, \r\n                                                                image_code_id:this.code_id, \r\n                                                                image_code_text:this.image_code_text})}).then(result => {\r\n                if(result.body.errcode === '0'){\r\n                    this.smsDisabling();\r\n                    Toast('获取短信成功请留意查收!');\r\n                }else{\r\n                    Toast('获取短信验证码失败!');\r\n                }\r\n            })\r\n        },\r\n        userRegister() {\r\n            this.$http.post('api/register',{data:JSON.stringify({mobile:this.phonecode, smscode:this.smscode, password:this.password, password2:this.password2})}).then(result => {\r\n                if(result.body.errno === '0'){\r\n                    Toast('手机号注册成功!');\r\n                }else if(result.body.errno === '3'){\r\n                    Toast('手机号已注册!');\r\n                }else{\r\n                    Toast('手机号注册失败!');\r\n                }\r\n                console.log(result.body);\r\n            })\r\n        }\r\n        \r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    \r\n    .vortex_img{\r\n        margin: 33px auto;\r\n        display: flex;\r\n        justify-content: center;\r\n        img{\r\n            height: 125px;\r\n        }\r\n    }\r\n\r\n    .form_box{\r\n        width: 85%;\r\n        margin: auto;\r\n\r\n        .row_block{\r\n            border: #26a2ff 1px solid;\r\n            border-radius: 25px;\r\n            margin-bottom: 28px;\r\n            height: 45px; \r\n            display: flex;\r\n            justify-content: center;\r\n            .r_b_icon{\r\n                width: 22%;\r\n                height: 45px;\r\n                img{\r\n                    width: 45px;\r\n                    height: 45px;\r\n                }\r\n                display: flex;\r\n                justify-content: center;\r\n            }\r\n            .r_b_input{\r\n                height: 45px;\r\n                input{\r\n                    background: 0 0;\r\n                    border: none;\r\n                }\r\n            }\r\n\r\n            .r_b_img{\r\n                width: 78%;\r\n                .img_input{\r\n                    width: 55%;\r\n                    height: 45px;\r\n                    input{\r\n                        background: 0 0;\r\n                        border: none;\r\n                    }\r\n                }\r\n                .img_img{\r\n                   \r\n                    width: 45%;\r\n                    height: 45px;\r\n                    img{\r\n                        height: 45px;\r\n                    }\r\n\r\n                    display: flex;\r\n                    justify-content: center;\r\n                }\r\n                display: flex;\r\n                justify-content: space-between;\r\n            }\r\n            .r_b_moblie{\r\n                width: 78%;\r\n                .mobile_input{\r\n                    width: 55%;\r\n                    height: 45px;\r\n                    input{\r\n                        background: 0 0;\r\n                        border: none;\r\n                    }\r\n                }\r\n                .mobile_button{\r\n                    width: 45%;\r\n                    height: 45px;\r\n                    button{\r\n                        background: #F0F8FF;\r\n                        border: none;\r\n                    }\r\n                    display: flex;\r\n                    justify-content: center;\r\n                }\r\n                display: flex;\r\n                justify-content: space-between;\r\n            }\r\n            \r\n        }\r\n        .r_b_target{\r\n            height: 50px;\r\n            margin: 15px auto;\r\n            display: flex;\r\n            justify-content:flex-end;\r\n        \r\n            p{\r\n                font-size: 16px;\r\n            }\r\n        \r\n        }\r\n        \r\n    }\r\n</style>\r\n"],"sourceRoot":"src/components/users"}]}